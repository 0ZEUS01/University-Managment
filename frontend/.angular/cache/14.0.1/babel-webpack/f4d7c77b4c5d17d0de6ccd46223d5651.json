{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nlet StudentProfileComponent = class StudentProfileComponent {\n  constructor(authService, userService, fb) {\n    this.authService = authService;\n    this.userService = userService;\n    this.fb = fb;\n    this.profile = {\n      fullName: 'Amal Hida',\n      email: 'amal.hida@gmail.com',\n      username: 'AmalHida',\n      enrollmentDate: new Date('2024-09-01'),\n      major: 'Computer Science',\n      dateOfBirth: new Date('2003-05-15'),\n      nationality: 'Moroccan',\n      academicStatus: 'Active',\n      scholarshipStatus: true,\n      phoneNumber: '+1 (555) 123-4567',\n      address: '123 Campus Drive, University City, State 12345',\n      personalInfo: {\n        gender: 'Female',\n        maritalStatus: 'Single',\n        languages: ['Arabic', 'English', 'French']\n      },\n      educationBackground: {\n        highSchool: 'Lycée Mohammed V, Casablanca',\n        highSchoolGradYear: 2021,\n        previousDegrees: [{\n          degree: 'High School Diploma',\n          institution: 'Lycée Mohammed V',\n          graduationYear: 2021\n        }]\n      },\n      contactInfo: {\n        personalEmail: 'amal.hida@gmail.com',\n        workEmail: 'amal.hida@university.edu',\n        homePhone: '+212 5 22 33 44 55',\n        socialMedia: {\n          linkedin: 'linkedin.com/in/amalhida',\n          twitter: '@AmalHida',\n          facebook: 'facebook.com/amal.hida'\n        }\n      }\n    };\n    this.isEditing = false;\n    this.currentUser = {};\n  }\n\n  ngOnInit() {\n    // Get the current logged-in user\n    this.currentUser = this.authService.currentUserValue;\n\n    if (this.currentUser) {\n      // Fetch full user details\n      this.userService.getUserProfile(this.currentUser.username).subscribe(userData => {\n        this.currentUser = userData;\n        this.profile = this.currentUser;\n      }, error => {\n        console.error('Error fetching user profile', error);\n      });\n    }\n\n    this.initForm();\n  }\n\n  initForm() {\n    var _a, _b, _c;\n\n    this.profileForm = this.fb.group({\n      fullName: [this.profile.fullName, Validators.required],\n      email: [this.profile.email, [Validators.required, Validators.email]],\n      phoneNumber: [this.profile.phoneNumber],\n      dateOfBirth: [this.profile.dateOfBirth],\n      nationality: [this.profile.nationality],\n      major: [this.profile.major],\n      address: [this.profile.address],\n      gender: [this.profile.personalInfo.gender],\n      maritalStatus: [this.profile.personalInfo.maritalStatus],\n      languages: [this.profile.personalInfo.languages.join(', ')],\n      highSchool: [this.profile.educationBackground.highSchool],\n      highSchoolGradYear: [this.profile.educationBackground.highSchoolGradYear],\n      personalEmail: [this.profile.contactInfo.personalEmail],\n      workEmail: [this.profile.contactInfo.workEmail],\n      homePhone: [this.profile.contactInfo.homePhone],\n      linkedin: [(_a = this.profile.contactInfo.socialMedia) === null || _a === void 0 ? void 0 : _a.linkedin],\n      twitter: [(_b = this.profile.contactInfo.socialMedia) === null || _b === void 0 ? void 0 : _b.twitter],\n      facebook: [(_c = this.profile.contactInfo.socialMedia) === null || _c === void 0 ? void 0 : _c.facebook]\n    });\n  }\n\n  toggleEdit() {\n    this.isEditing = !this.isEditing;\n\n    if (this.isEditing) {\n      this.initForm();\n    }\n  }\n\n  updateProfile() {\n    if (this.profileForm.valid) {\n      // Update profile with form values\n      const formData = {\n        fullName: this.profileForm.get('fullName').value,\n        email: this.profileForm.get('email').value,\n        phoneNumber: this.profileForm.get('phoneNumber').value,\n        dateOfBirth: this.profileForm.get('dateOfBirth').value,\n        nationality: this.profileForm.get('nationality').value,\n        major: this.profileForm.get('major').value,\n        address: this.profileForm.get('address').value,\n        personalInfo: {\n          gender: this.profileForm.get('gender').value,\n          maritalStatus: this.profileForm.get('maritalStatus').value,\n          languages: this.profileForm.get('languages').value.split(',').map(lang => lang.trim())\n        },\n        educationBackground: {\n          highSchool: this.profileForm.get('highSchool').value,\n          highSchoolGradYear: this.profileForm.get('highSchoolGradYear').value,\n          previousDegrees: this.profile.educationBackground.previousDegrees\n        },\n        contactInfo: {\n          personalEmail: this.profileForm.get('personalEmail').value,\n          workEmail: this.profileForm.get('workEmail').value,\n          homePhone: this.profileForm.get('homePhone').value,\n          socialMedia: {\n            linkedin: this.profileForm.get('linkedin').value,\n            twitter: this.profileForm.get('twitter').value,\n            facebook: this.profileForm.get('facebook').value\n          }\n        }\n      }; // Update user profile\n\n      this.userService.updateUserProfile(this.currentUser.username, formData).subscribe(updatedUser => {\n        // Update local user data\n        this.currentUser = updatedUser;\n        this.profile = this.currentUser; // Optionally show success message\n\n        console.log('Profile updated successfully');\n      }, error => {\n        console.error('Error updating profile', error); // Optionally show error message\n      }); // Exit editing mode\n\n      this.isEditing = false;\n    }\n  }\n\n  cancelEdit() {\n    this.isEditing = false;\n  }\n\n  logout() {\n    this.authService.logout(); // Navigate to login page\n  }\n\n};\nStudentProfileComponent = __decorate([Component({\n  selector: 'app-student-profile',\n  templateUrl: './student-profile.component.html',\n  styleUrls: ['./student-profile.component.css']\n})], StudentProfileComponent);\nexport { StudentProfileComponent };","map":null,"metadata":{},"sourceType":"module"}